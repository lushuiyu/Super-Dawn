customElements.get("price-per-item")||customElements.define("price-per-item",class extends HTMLElement{constructor(){super(),this.variantId=this.dataset.variantId,this.input=document.getElementById("Quantity-"+(this.dataset.sectionId||this.dataset.variantId)),this.input&&this.input.addEventListener("change",this.onInputChange.bind(this)),this.getVolumePricingArray()}updatePricePerItemUnsubscriber=void 0;variantIdChangedUnsubscriber=void 0;connectedCallback(){this.variantIdChangedUnsubscriber=subscribe(PUB_SUB_EVENTS.variantChange,t=>{this.variantId=t.data.variant.id.toString(),this.getVolumePricingArray()}),this.updatePricePerItemUnsubscriber=subscribe(PUB_SUB_EVENTS.cartUpdate,t=>{t.cartData&&(void 0!==t.cartData.variant_id?t.productVariantId===this.variantId&&this.updatePricePerItem(t.cartData.quantity):0!==t.cartData.item_count&&(t=t.cartData.items.find(t=>t.variant_id.toString()===this.variantId))&&t.id.toString()===this.variantId?this.updatePricePerItem(t.quantity):this.updatePricePerItem(0))})}disconnectedCallback(){this.updatePricePerItemUnsubscriber&&this.updatePricePerItemUnsubscriber(),this.variantIdChangedUnsubscriber&&this.variantIdChangedUnsubscriber()}onInputChange(){this.updatePricePerItem()}updatePricePerItem(t){this.input&&(this.enteredQty=parseInt(this.input.value),this.step=parseInt(this.input.step)),this.currentQtyForVolumePricing=void 0===t?this.getCartQuantity(t)+this.enteredQty:this.getCartQuantity(t)+parseInt(this.step),this.classList.contains("variant-item__price-per-item")&&(this.currentQtyForVolumePricing=this.getCartQuantity(t));for(var e of this.qtyPricePairs)if(this.currentQtyForVolumePricing>=e[0]){var i=document.querySelector(`price-per-item[id^="Price-Per-Item-${this.dataset.sectionId||this.dataset.variantId}"] .price-per-item span`);this.classList.contains("variant-item__price-per-item")?i.innerHTML=window.quickOrderListStrings.each.replace("[money]",e[1]):i.innerHTML=e[1];break}}getCartQuantity(t){return t||0===t?t:parseInt(this.input.dataset.cartQuantity)}getVolumePricingArray(){var t=document.getElementById("Volume-"+(this.dataset.sectionId||this.dataset.variantId));this.qtyPricePairs=[],t&&t.querySelectorAll("li").forEach(t=>{var e=parseInt(t.querySelector("span:first-child").textContent),t=t.querySelector("span:not(:first-child):last-child").dataset.text;this.qtyPricePairs.push([e,t])}),this.qtyPricePairs.reverse()}});